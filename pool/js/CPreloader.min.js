function CPreloader(){var e,i,r,a,t,s,d,h;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this),s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png"),s_oSpriteLibrary.addSprite("mask_progress_bar","./sprites/mask_progress_bar.png"),s_oSpriteLibrary.addSprite("200x200","./sprites/200x200.jpg"),s_oSpriteLibrary.loadSprites(),h=new createjs.Container,s_oStage.addChild(h)},this.unload=function(){h.removeAllChildren()},this._onImagesLoaded=function(){},this._onAllImagesLoaded=function(){this.attachSprites(),s_oMain.preloaderReady()},this.attachSprites=function(){var o=new createjs.Shape;o.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT),o.cache(0,0,CANVAS_WIDTH,CANVAS_HEIGHT),h.addChild(o);n=s_oSpriteLibrary.getSprite("200x200");(s=createBitmap(n)).regX=.5*n.width,s.regY=.5*n.height,s.x=CANVAS_WIDTH/2,s.y=CANVAS_HEIGHT/2-80,h.addChild(s),(d=new createjs.Shape).graphics.beginFill("rgba(0,0,0,0.01)").drawRoundRect(s.x-100,s.y-100,200,200,10),h.addChild(d),s.mask=d;var n=s_oSpriteLibrary.getSprite("progress_bar");(a=createBitmap(n)).x=CANVAS_WIDTH/2-n.width/2,a.y=CANVAS_HEIGHT/2+70,h.addChild(a),e=n.width,i=n.height,(t=createBitmap(s_oSpriteLibrary.getSprite("mask_progress_bar"))).x=a.x+e,t.y=a.y,t.regX=e,h.addChild(t),a.mask=t,(r=new createjs.Text("        ","30px "+FONT_GAME,"#fff")).x=CANVAS_WIDTH/2,r.y=CANVAS_HEIGHT/2+120,r.textBaseline="alphabetic",r.textAlign="center",h.addChild(r);var p=r.getBounds();r.cache(p.x,p.y,p.width,p.height)},this.refreshLoader=function(e){r.text=e+"%",r.uncache();var i=r.getBounds();r.cache(i.x,i.y,i.width,i.height),100===e&&(s_oMain._allResourcesLoaded(),r.visible=!1,a.visible=!1);var s=1-e/100;t.scaleX=s},this._init()}